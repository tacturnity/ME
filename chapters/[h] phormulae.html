<!DOCTYPE html>
<html lang="en" style="--base-font-size: 10px;"> <!-- Default font size set to 10px -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Summary of Formulas</title> <!-- CHANGE THIS TITLE -->

    <!-- Google Fonts - Roboto Mono -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;500;700&amp;display=swap" rel="stylesheet">

    <!-- MathJax Configuration -->
    <script>
        MathJax = {
          tex: { inlineMath: [['$', '$'], ['\\(', '\\)']], displayMath: [['$$', '$$'], ['\\[', '\\]']], processEscapes: true, tags: 'ams' },
          options: { skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'], ignoreHtmlClass: 'tex2jax_ignore', processHtmlClass: 'tex2jax_process' },
          svg: { fontCache: 'global' },
          startup: {
            ready: () => { console.log('MathJax ready.'); MathJax.startup.defaultReady(); MathJax.startup.promise.then(() => console.log('MathJax initial typeset complete.')); }
          }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <style>
        /* Basic Reset */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        /* Keyframes for Animations (FadeIn) */
        @keyframes fadeIn { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }

        /* Fonts & Base Styling */
        body {
            font-family: 'Roboto Mono', monospace;
            color: #e0e0e0;
            line-height: 1.7;
            padding: 25px;
            background-color: #1a1a1a;
            min-height: 100vh;
            font-size: var(--base-font-size); /* Controlled by JS */
            transition: font-size 0.2s ease-in-out; /* Default smooth transition */
            padding-bottom: 80px; /* Space for controls */
            overflow-x: hidden;
        }
        /* Class to disable transition during rapid changes (e.g., hold) */
        body.no-font-transition {
            transition: none !important;
        }

        /* Headings */
        h1, h2 { font-family: 'Roboto Mono', monospace; text-align: center; margin-bottom: 1.5em; }
        h1 { font-size: 2.4em; color: #ffffff; font-weight: 700; padding-bottom: 12px; margin-top: 1.5em; margin-bottom: 1.5em; border-bottom: 2px solid #ffffff; animation: fadeIn 0.8s ease-out both; animation-delay: 0.1s; letter-spacing: -0.5px; }
        h2 { font-size: 1.6em; color: #cccccc; font-weight: 500; margin-top: 30px; margin-bottom: 1.5em; border-bottom: 1px solid #555555; padding-bottom: 5px; animation: fadeIn 0.8s ease-out both; animation-delay: 0.3s; }
        h3 { font-size: 1.2em; color: #bdbdbd; font-weight: 500; margin-top: 1.8em; margin-bottom: 0.8em; padding-bottom: 3px; border-bottom: 1px dotted #444; text-align: left; }
        h4 { font-size: 1.1em; color: #b0b0b0; font-weight: 500; margin-top: 1.5em; margin-bottom: 0.7em; text-align: left; }


        /* Main Content Area */
        main { max-width: 800px; margin: 40px auto; background-color: rgba(30, 30, 30, 0.85); padding: 35px 45px; border-radius: 10px; box-shadow: 0 10px 25px rgba(0, 0, 0, 0.7); backdrop-filter: blur(6px); border: 1px solid rgba(255, 255, 255, 0.1); animation: fadeIn 0.8s ease-out both; animation-delay: 0.2s; }
        /* Paragraph and List styling */
        p { margin-bottom: 1em; color: inherit; font-size: inherit; }
        ul, ol { margin-left: 25px; list-style: disc; margin-bottom: 1em; }
        ol { list-style: decimal; }
        li { margin-bottom: 8px; font-size: inherit; }
        strong { font-weight: 500; color: #ffffff; }

        /* Formula Container Styling (with horizontal scroll) */
        .formula-container {
            margin: 15px 0 20px 0; padding: 10px 20px; background-color: rgba(45, 45, 45, 0.9);
            border-radius: 6px; border: 1px solid rgba(255, 255, 255, 0.1);
            overflow-x: auto; overflow-y: hidden; /* Horizontal scroll, no vertical */
            transition: background-color 0.3s ease, border-color 0.3s ease;
            cursor: pointer; color: #e0e0e0; border-left: 4px solid transparent;
            font-family: 'Roboto Mono', monospace; position: relative; white-space: nowrap;
        }
        .formula-container:hover { background-color: rgba(60, 60, 60, 0.95); border-left-color: #a6e3a1; border-color: rgba(166, 227, 161, 0.5); }
        .formula-container.copied { background-color: rgba(166, 227, 161, 0.2); border-color: #a6e3a1; border-left-color: #a6e3a1; }
        /* Optional Scrollbar Style */
        .formula-container::-webkit-scrollbar { height: 8px; }
        .formula-container::-webkit-scrollbar-track { background: rgba(60, 60, 60, 0.5); border-radius: 4px; }
        .formula-container::-webkit-scrollbar-thumb { background-color: #888; border-radius: 4px; border: 2px solid transparent; background-clip: content-box; }
        .formula-container::-webkit-scrollbar-thumb:hover { background-color: #aaa; }
        /* MathJax display style */
        .formula-container mjx-container[display="true"] { margin: 0.5em 0 !important; text-align: left !important; display: inline-block; vertical-align: middle; }
        
        table { border-collapse: collapse; margin: 1em auto; background-color: rgba(40,40,40,0.8); width: auto; }
        th, td { border: 1px solid #555; padding: 8px 12px; text-align: center; }
        th { background-color: rgba(60,60,60,0.9); color: #ddd; }

        pre {
            background-color: #2b2b2b; padding: 10px; border-radius: 5px; 
            color: #ccc; overflow-x: auto; white-space: pre; 
            font-family: 'Roboto Mono', monospace; font-size: 0.95em;
            margin: 1em 0;
        }

        /* Footer Styling */
        footer { text-align: center; margin-top: 70px; padding-bottom: 35px; font-size: 0.85em; color: #888888; animation: fadeIn 1s ease-out both; animation-delay: 0.7s; }

        /* Simple Dark Theme Scrollbar for Page */
        body::-webkit-scrollbar { width: 10px; }
        body::-webkit-scrollbar-track { background: #2a2a2a; border-radius: 5px; }
        body::-webkit-scrollbar-thumb { background-color: #777; border-radius: 5px; border: 2px solid #2a2a2a; background-clip: content-box; }
        body::-webkit-scrollbar-thumb:hover { background-color: #999; }
        html { scrollbar-width: thin; scrollbar-color: #777 #2a2a2a; }
        @supports (scrollbar-gutter: stable) { html { scrollbar-gutter: stable; } }

        /* Font Control Icons CSS */
        .font-control { position: fixed; bottom: 0; left: 0; width: 100%; padding: 10px 25px; box-sizing: border-box; display: flex; justify-content: space-between; align-items: center; pointer-events: none; z-index: 10; }
        .font-control-icon { font-size: 28px; font-weight: bold; color: #777; cursor: pointer; padding: 8px; transition: color 0.3s ease; pointer-events: auto; user-select: none; line-height: 1; display: inline-block; }
        .font-control-icon:hover { color: #a6e3a1; }
        #fontSizeDisplay { position: fixed; bottom: 15px; left: 50%; transform: translateX(-50%); background-color: rgba(45, 45, 45, 0.9); color: #e0e0e0; padding: 6px 12px; border-radius: 5px; font-size: 13px; font-family: 'Roboto Mono', monospace; z-index: 11; opacity: 0; transition: opacity 0.3s ease-in-out; pointer-events: none; white-space: nowrap; }
        #fontSizeDisplay.visible { opacity: 1; }
    </style>
</head>
<body>

    <header>
        <h1>Summary of Formulas</h1>
    </header>

    <main>
        <p>Chapter-wise list of all the formulas encountered:</p>

        <h2>Chapter 2: Engineering Materials</h2>
        <ol>
            <li>
                <strong>Stress ($s$ or $\sigma$):</strong>
                <div class="formula-container"
                     onclick="copyFormulaLatex(this, '\\color{white}{s = \\frac{F}{A_0} \\quad \\text{(Eq. 2.1)}}')"
                     data-latex="s = \frac{F}{A_0} \quad \text{(Eq. 2.1)}"
                     title="Click to copy LaTeX">
                     $$ s = \frac{F}{A_0} \quad \text{(Eq. 2.1)} $$
                </div>
                <p><em>Description:</em> Internal resistance force per unit area.</p>
            </li>
            <li>
                <strong>Strain ($e$ or $\epsilon$):</strong>
                <div class="formula-container"
                     onclick="copyFormulaLatex(this, '\\color{white}{e = \\frac{\\Delta L}{L_0} \\quad \\text{(Eq. 2.2)}}')"
                     data-latex="e = \frac{\Delta L}{L_0} \quad \text{(Eq. 2.2)}"
                     title="Click to copy LaTeX">
                     $$ e = \frac{\Delta L}{L_0} \quad \text{(Eq. 2.2)} $$
                </div>
                <p><em>Description:</em> Measure of deformation relative to original size.</p>
            </li>
            <li>
                <strong>Young's Modulus ($E$) / Modulus of Elasticity:</strong>
                <div class="formula-container"
                     onclick="copyFormulaLatex(this, '\\color{white}{E = \\frac{\\sigma}{\\epsilon} \\quad \\text{(Eq. 2.3)}}')"
                     data-latex="E = \frac{\sigma}{\epsilon} \quad \text{(Eq. 2.3)}"
                     title="Click to copy LaTeX">
                     $$ E = \frac{\sigma}{\epsilon} \quad \text{(Eq. 2.3)} $$
                </div>
                <p><em>Description:</em> Ratio of stress to strain in the linear elastic region; measures stiffness.</p>
            </li>
            <li>
                <strong>Young's Modulus ($E$) (alternate form derived from stress and strain definitions):</strong>
                <div class="formula-container"
                     onclick="copyFormulaLatex(this, '\\color{white}{E = \\frac{FL_0}{A_0\\Delta L} \\quad \\text{(Eq. 2.4)}}')"
                     data-latex="E = \frac{FL_0}{A_0\Delta L} \quad \text{(Eq. 2.4)}"
                     title="Click to copy LaTeX">
                     $$ E = \frac{FL_0}{A_0\Delta L} \quad \text{(Eq. 2.4)} $$
                </div>
                <p><em>Description:</em> Relates Young's Modulus to applied force, original dimensions, and change in length.</p>
            </li>
            <li>
                <strong>Elongation ($\Delta L$):</strong>
                <div class="formula-container"
                     onclick="copyFormulaLatex(this, '\\color{white}{\\Delta L = \\frac{FL_0}{A_0E} \\quad \\text{(Eq. 2.5)}}')"
                     data-latex="\Delta L = \frac{FL_0}{A_0E} \quad \text{(Eq. 2.5)}"
                     title="Click to copy LaTeX">
                     $$ \Delta L = \frac{FL_0}{A_0E} \quad \text{(Eq. 2.5)} $$
                </div>
                <p><em>Description:</em> Calculates the change in length under a given force for a material with known Young's modulus.</p>
            </li>
            <li>
                <strong>Poisson's Ratio ($\nu$):</strong>
                <div class="formula-container"
                     onclick="copyFormulaLatex(this, '\\color{white}{\\nu = - \\frac{\\epsilon_t}{\\epsilon_a} \\quad \\text{(Eq. 2.6)}}')"
                     data-latex="\nu = - \frac{\epsilon_t}{\epsilon_a} \quad \text{(Eq. 2.6)}"
                     title="Click to copy LaTeX">
                     $$ \nu = - \frac{\epsilon_t}{\epsilon_a} \quad \text{(Eq. 2.6)} $$
                </div>
                <p><em>Description:</em> Ratio of lateral (transverse) strain to axial (longitudinal) strain during elastic deformation.</p>
                <ul>
                    <li>Where Axial strain $\epsilon_a = \frac{\delta}{L}$ ($\delta$ is change in length $L$)</li>
                    <li>And Transverse strain $\epsilon_t = \frac{\delta b}{b}$ ($\delta b$ is change in transverse dimension $b$)</li>
                </ul>
            </li>
            <li>
                <strong>Factor of Safety (FoS) (for ductile materials):</strong>
                <div class="formula-container"
                     onclick="copyFormulaLatex(this, '\\color{white}{\\text{FoS} = \\frac{\\text{Yield stress}}{\\text{Design stress}} \\quad \\text{(Eq. 2.7)}}')"
                     data-latex="\text{FoS} = \frac{\text{Yield stress}}{\text{Design stress}} \quad \text{(Eq. 2.7)}"
                     title="Click to copy LaTeX">
                     $$ \text{FoS} = \frac{\text{Yield stress}}{\text{Design stress}} \quad \text{(Eq. 2.7)} $$
                </div>
                <p><em>Description:</em> Ratio of the material's yield stress to the allowable design stress.</p>
            </li>
            <li>
                <strong>Factor of Safety (FoS) (for brittle materials):</strong>
                <div class="formula-container"
                     onclick="copyFormulaLatex(this, '\\color{white}{\\text{FoS} = \\frac{\\text{Ultimate stress}}{\\text{Design stress}} \\quad \\text{(Eq. 2.8)}}')"
                     data-latex="\text{FoS} = \frac{\text{Ultimate stress}}{\text{Design stress}} \quad \text{(Eq. 2.8)}"
                     title="Click to copy LaTeX">
                     $$ \text{FoS} = \frac{\text{Ultimate stress}}{\text{Design stress}} \quad \text{(Eq. 2.8)} $$
                </div>
                <p><em>Description:</em> Ratio of the material's ultimate stress to the allowable design stress.</p>
            </li>
        </ol>

        <h2>Chapter 4: Theory of Metal Cutting</h2>
        <ol>
            <li>
                <strong>Heat Distribution in Machining ($Q$):</strong>
                <div class="formula-container"
                     onclick="copyFormulaLatex(this, '\\color{white}{Q = Q_1 + Q_2 + Q_3 + Q_4 \\quad \\text{(Eq. 4.1)}}')"
                     data-latex="Q = Q_1 + Q_2 + Q_3 + Q_4 \quad \text{(Eq. 4.1)}"
                     title="Click to copy LaTeX">
                     $$ Q = Q_1 + Q_2 + Q_3 + Q_4 \quad \text{(Eq. 4.1)} $$
                </div>
                <p><em>Description:</em> Total heat generated ($Q$) is distributed into heat taken by chips ($Q_1$), tool ($Q_2$), workpiece ($Q_3$), and surroundings ($Q_4$).</p>
            </li>
            <li>
                <strong>Taylor's Tool Life Equation:</strong>
                <div class="formula-container"
                     onclick="copyFormulaLatex(this, '\\color{white}{vT^n = C \\quad \\text{(Eq. 4.2)}}')"
                     data-latex="vT^n = C \quad \text{(Eq. 4.2)}"
                     title="Click to copy LaTeX">
                     $$ vT^n = C \quad \text{(Eq. 4.2)} $$
                </div>
                <p><em>Description:</em> Relates cutting speed ($v$), tool life ($T$), with constants $n$ (exponent) and $C$.</p>
            </li>
            <li>
                <strong>Taylor's Exponent ($n$):</strong>
                <div class="formula-container"
                     onclick="copyFormulaLatex(this, '\\color{white}{n = \\tan \\theta = \\frac{\\log v_1 - \\log v_2}{\\log T_2 - \\log T_1} \\quad \\text{(Eq. 4.3)}}')"
                     data-latex="n = \tan \theta = \frac{\log v_1 - \log v_2}{\log T_2 - \log T_1} \quad \text{(Eq. 4.3)}"
                     title="Click to copy LaTeX">
                     $$ n = \tan \theta = \frac{\log v_1 - \log v_2}{\log T_2 - \log T_1} \quad \text{(Eq. 4.3)} $$
                </div>
                <p><em>Description:</em> Slope of the log-log plot of tool life vs. cutting speed.</p>
            </li>
            <li>
                <strong>Extended Taylor's Tool Life Equation:</strong>
                <div class="formula-container"
                     onclick="copyFormulaLatex(this, '\\color{white}{vT^n f^{n_1} d^{n_2} = C \\quad \\text{(Eq. 4.4)}}')"
                     data-latex="vT^n f^{n_1} d^{n_2} = C \quad \text{(Eq. 4.4)}"
                     title="Click to copy LaTeX">
                     $$ vT^n f^{n_1} d^{n_2} = C \quad \text{(Eq. 4.4)} $$
                </div>
                <p><em>Description:</em> Includes feed ($f$) and depth of cut ($d$) with their respective exponents $n_1$ and $n_2$.</p>
            </li>
            <li>
                <strong>Machinability Index:</strong>
                <div class="formula-container"
                     onclick="copyFormulaLatex(this, '\\color{white}{\\text{Machinability} = \\left( \\frac{V_t}{V_s} \\right) \\times 100\\% \\quad \\text{(Eq. 4.5)}}')"
                     data-latex="\text{Machinability} = \left( \frac{V_t}{V_s} \right) \times 100\% \quad \text{(Eq. 4.5)}"
                     title="Click to copy LaTeX">
                     $$ \text{Machinability} = \left( \frac{V_t}{V_s} \right) \times 100\% \quad \text{(Eq. 4.5)} $$
                </div>
                <p><em>Description:</em> Compares the cutting speed of a test material ($V_t$) to a standard material ($V_s$) for the same tool life.</p>
            </li>
        </ol>

        <h2>Chapter 11: Casting Processes</h2>
        <ol>
            <li>
                <strong>Solidification Time ($t$) (Chvorinov's Rule):</strong>
                <div class="formula-container"
                     onclick="copyFormulaLatex(this, '\\color{white}{t = c \\cdot \\left( \\frac{V}{A} \\right)^2 \\quad \\text{(Eq. 11.1)}}')"
                     data-latex="t = c \cdot \left( \frac{V}{A} \right)^2 \quad \text{(Eq. 11.1)}"
                     title="Click to copy LaTeX">
                     $$ t = c \cdot \left( \frac{V}{A} \right)^2 \quad \text{(Eq. 11.1)} $$
                </div>
                <p><em>Description:</em> Relates solidification time ($t$) to the volume ($V$) and surface area ($A$) of the casting, and a mould constant ($c$).</p>
            </li>
            <li>
                <strong>Casting Yield ($C_y$):</strong>
                <div class="formula-container"
                     onclick="copyFormulaLatex(this, '\\color{white}{C_y = \\left( \\frac{W_c}{W_c + W_g} \\right) \\times 100\\% \\quad \\text{(Eq. 11.2)}}')"
                     data-latex="C_y = \left( \frac{W_c}{W_c + W_g} \right) \times 100\% \quad \text{(Eq. 11.2)}"
                     title="Click to copy LaTeX">
                     $$ C_y = \left( \frac{W_c}{W_c + W_g} \right) \times 100\% \quad \text{(Eq. 11.2)} $$
                </div>
                <p><em>Description:</em> Ratio of the weight of the casting ($W_c$) to the total weight of metal poured ($W_c + W_g$, where $W_g$ is weight of gating system).</p>
            </li>
        </ol>

        <h2>Chapter 12: Metal Forming Processes</h2>
        <ol>
            <li>
                <strong>Absolute Draught (Draft) ($\delta t$):</strong>
                <div class="formula-container"
                     onclick="copyFormulaLatex(this, '\\color{white}{\\delta t = t_1 - t_2 \\quad \\text{(Eq. 12.1)}}')"
                     data-latex="\delta t = t_1 - t_2 \quad \text{(Eq. 12.1)}"
                     title="Click to copy LaTeX">
                     $$ \delta t = t_1 - t_2 \quad \text{(Eq. 12.1)} $$
                </div>
                <p><em>Description:</em> Difference between initial thickness ($t_1$) and final thickness ($t_2$) in rolling.</p>
            </li>
            <li>
                <strong>Maximum Possible Draft ($\delta_{max}$):</strong>
                <div class="formula-container"
                     onclick="copyFormulaLatex(this, '\\color{white}{\\delta_{max} = \\mu^2 R \\quad \\text{(Eq. 12.2)}}')"
                     data-latex="\delta_{max} = \mu^2 R \quad \text{(Eq. 12.2)}"
                     title="Click to copy LaTeX">
                     $$ \delta_{max} = \mu^2 R \quad \text{(Eq. 12.2)} $$
                </div>
                <p><em>Description:</em> Maximum reduction in thickness possible, dependent on coefficient of friction ($\mu$) and roll radius ($R$).</p>
            </li>
            <li>
                <strong>Absolute Elongation ($\delta l$):</strong>
                <div class="formula-container"
                     onclick="copyFormulaLatex(this, '\\color{white}{\\delta l = l_2 - l_1 \\quad \\text{(Eq. 12.3)}}')"
                     data-latex="\delta l = l_2 - l_1 \quad \text{(Eq. 12.3)}"
                     title="Click to copy LaTeX">
                     $$ \delta l = l_2 - l_1 \quad \text{(Eq. 12.3)} $$
                </div>
                <p><em>Description:</em> Difference between final length ($l_2$) and initial length ($l_1$).</p>
            </li>
            <li>
                <strong>Absolute Spread ($\delta b$):</strong>
                <div class="formula-container"
                     onclick="copyFormulaLatex(this, '\\color{white}{\\delta b = b_2 - b_1 \\quad \\text{(Eq. 12.4)}}')"
                     data-latex="\delta b = b_2 - b_1 \quad \text{(Eq. 12.4)}"
                     title="Click to copy LaTeX">
                     $$ \delta b = b_2 - b_1 \quad \text{(Eq. 12.4)} $$
                </div>
                <p><em>Description:</em> Difference between final breadth ($b_2$) and initial breadth ($b_1$).</p>
            </li>
            <li>
                <strong>Relative Draught ($R_t$):</strong>
                <div class="formula-container"
                     onclick="copyFormulaLatex(this, '\\color{white}{R_t = \\left( \\frac{\\delta t}{t_1} \\right) \\times 100 \\quad \\text{(Eq. 12.5)}}')"
                     data-latex="R_t = \left( \frac{\delta t}{t_1} \right) \times 100 \quad \text{(Eq. 12.5)}"
                     title="Click to copy LaTeX">
                     $$ R_t = \left( \frac{\delta t}{t_1} \right) \times 100 \quad \text{(Eq. 12.5)} $$
                </div>
                <p><em>Description:</em> Ratio of absolute draught to initial thickness, as a percentage.</p>
            </li>
            <li>
                <strong>Elongation Coefficient ($\mu_L$):</strong>
                <div class="formula-container"
                     onclick="copyFormulaLatex(this, '\\color{white}{\\mu_L = \\frac{l_2}{l_1} \\quad \\text{(Eq. 12.6)}}')"
                     data-latex="\mu_L = \frac{l_2}{l_1} \quad \text{(Eq. 12.6)}"
                     title="Click to copy LaTeX">
                     $$ \mu_L = \frac{l_2}{l_1} \quad \text{(Eq. 12.6)} $$
                </div>
                <p><em>Description:</em> Ratio of final length to initial length.</p>
            </li>
            <li>
                <strong>Angle of Contact ($\alpha$) in Rolling:</strong>
                <div class="formula-container"
                     onclick="copyFormulaLatex(this, '\\color{white}{\\cos \\alpha = 1 - \\frac{\\delta t}{D} \\quad \\text{(Eq. 12.7)}}')"
                     data-latex="\cos \alpha = 1 - \frac{\delta t}{D} \quad \text{(Eq. 12.7)}"
                     title="Click to copy LaTeX">
                     $$ \cos \alpha = 1 - \frac{\delta t}{D} \quad \text{(Eq. 12.7)} $$
                </div>
                <p><em>Description:</em> Relates the angle of contact ($\alpha$) to the absolute draught ($\delta t$) and roll diameter ($D$).</p>
            </li>
            <li>
                <strong>Coefficient of Friction ($\mu$) in Rolling:</strong>
                <div class="formula-container"
                     onclick="copyFormulaLatex(this, '\\color{white}{\\mu = \\tan \\alpha \\quad \\text{(Eq. 12.8)}}')"
                     data-latex="\mu = \tan \alpha \quad \text{(Eq. 12.8)}"
                     title="Click to copy LaTeX">
                     $$ \mu = \tan \alpha \quad \text{(Eq. 12.8)} $$
                </div>
                <p><em>Description:</em> Relates the coefficient of friction to the angle of contact.</p>
            </li>
        </ol>

        <h2>Chapter 15: Mechanical Joining Processes</h2>
        <ol>
            <li>
                <strong>Heat Generated in Resistance Welding ($H$):</strong>
                <div class="formula-container"
                     onclick="copyFormulaLatex(this, '\\color{white}{H = I^2 Rtk \\quad \\text{(Eq. 15.1)}}')"
                     data-latex="H = I^2 Rtk \quad \text{(Eq. 15.1)}"
                     title="Click to copy LaTeX">
                     $$ H = I^2 Rtk \quad \text{(Eq. 15.1)} $$
                </div>
                <p><em>Description:</em> Heat generated ($H$) depends on current ($I$), resistance ($R$), time of current flow ($t$), and a constant for losses ($k$).</p>
            </li>
        </ol>
        <!-- END OF NEW CONTENT -->
    </main>

    <footer>
        <!-- Optional: Add footer text if needed -->
    </footer>

     <!-- Font Size Control Icons HTML -->
     <div class="font-control">
         <span class="font-control-icon" id="fontMinusBtn" title="Decrease font size">-</span>
         <span class="font-control-icon" id="fontPlusBtn" title="Increase font size">+</span>
     </div>
     <div id="fontSizeDisplay">10px</div> <!-- Initial size display -->

    <script>
        // --- Formula Copy Function (Corrected) ---
        function copyFormulaLatex(element, latexStringToCopy) { 
            if (!latexStringToCopy) { 
                console.error('No LaTeX string passed to copy function.');
                return;
            }

            navigator.clipboard.writeText(latexStringToCopy).then(() => { 
                element.classList.add('copied');
                const originalTitle = element.title;
                element.title = 'Copied: ' + latexStringToCopy; 
                setTimeout(() => {
                    element.classList.remove('copied');
                    element.title = originalTitle; 
                 }, 1500);
            }).catch(err => {
                console.error('Failed to copy LaTeX: ', err);
                const originalTitle = element.title;
                element.title = 'Copy failed!';
                 setTimeout(() => { element.title = originalTitle; }, 1500);
            });
        }

        // --- Font Size Control & Hold Functionality ---
        document.addEventListener('DOMContentLoaded', () => {
            const minusBtn = document.getElementById('fontMinusBtn');
            const plusBtn = document.getElementById('fontPlusBtn');
            const display = document.getElementById('fontSizeDisplay');
            const htmlEl = document.documentElement;
            const bodyEl = document.body; // Target body for transition class

            // Configuration
            let currentSize = 10; // Initial size set to 10px
            const minSize = 10;
            const maxSize = 28; // Adjust max size if needed
            const step = 1;
            let displayTimeout = null;
            let holdTimeout = null;
            let holdInterval = null;
            const initialHoldDelay = 400; // ms before repeat starts
            const repeatInterval = 100;  // ms between repeats while holding
            const mathJaxDebounceDelay = 350; // ms to wait after last change before re-typesetting

            // --- Debounce Function ---
            function debounce(func, wait) {
                let timeout;
                return function executedFunction(...args) {
                    const later = () => { clearTimeout(timeout); func(...args); };
                    clearTimeout(timeout);
                    timeout = setTimeout(later, wait);
                };
            }

            // --- Debounced MathJax Typesetting ---
            const queueMathJaxTypeset = debounce(() => {
                if (window.MathJax && MathJax.typesetPromise) {
                    console.log("Debounced: Typesetting MathJax");
                    MathJax.typesetPromise([bodyEl]).catch((err) => console.error('MathJax typesetting error:', err));
                 }
            }, mathJaxDebounceDelay);

            // --- Update Font Size and Display ---
            function updateFontSize(newSize) {
                const oldSize = currentSize;
                currentSize = Math.max(minSize, Math.min(maxSize, newSize));

                if (currentSize !== oldSize) {
                    htmlEl.style.setProperty('--base-font-size', currentSize + 'px');
                    display.textContent = currentSize + 'px';
                    display.classList.add('visible');

                    if (displayTimeout) { clearTimeout(displayTimeout); }
                    displayTimeout = setTimeout(() => {
                        display.classList.remove('visible');
                        displayTimeout = null;
                    }, 1500);
                    return true; // Indicate size changed
                }
                return false; // Indicate size hit limit
            }

            // --- Stop Holding Action ---
            function stopHolding() {
                bodyEl.classList.remove('no-font-transition'); // Re-enable transition
                if (holdTimeout) { clearTimeout(holdTimeout); holdTimeout = null; }
                if (holdInterval) { clearInterval(holdInterval); holdInterval = null; }
                queueMathJaxTypeset();
            }

            // --- Start Holding Action ---
            function startHolding(direction) {
                bodyEl.classList.add('no-font-transition'); 
                updateFontSize(currentSize + direction * step); 
                // Clear previous timers to prevent multiple intervals if mousedown event fires rapidly
                if (holdTimeout) clearTimeout(holdTimeout);
                if (holdInterval) clearInterval(holdInterval);

                holdTimeout = setTimeout(() => {
                    holdInterval = setInterval(() => {
                        if (!updateFontSize(currentSize + direction * step)) {
                            stopHolding(); // Stop if size limit is reached
                        }
                    }, repeatInterval);
                }, initialHoldDelay);
            }

            // --- Event Listeners ---
            if (minusBtn && plusBtn && display) {
                minusBtn.addEventListener('mousedown', (e) => { e.preventDefault(); startHolding(-1); });
                plusBtn.addEventListener('mousedown', (e) => { e.preventDefault(); startHolding(1); });
                window.addEventListener('mouseup', stopHolding); // Stop on release anywhere
                minusBtn.addEventListener('mouseleave', stopHolding); // Stop if mouse leaves while holding
                plusBtn.addEventListener('mouseleave', stopHolding);

                // Set initial state
                htmlEl.style.setProperty('--base-font-size', currentSize + 'px');
                display.textContent = currentSize + 'px';
                console.log("Font control initialized. Current size:", currentSize);
                 // Initial MathJax typeset on load (after ready)
                 if (window.MathJax) {
                     MathJax.startup.promise.then(() => {
                         console.log("Queueing initial MathJax typeset");
                         queueMathJaxTypeset(); // Use the debounced version even initially
                     });
                 }
            } else {
                console.error("Font control elements not found!");
            }

            // --- Horizontal Scroll Redirect for Formula Containers ---
             const formulaContainers = document.querySelectorAll('.formula-container');
             formulaContainers.forEach(container => {
                 container.addEventListener('wheel', function(event) {
                     const isScrollableHorizontally = this.scrollWidth > this.clientWidth;
                     if (isScrollableHorizontally) {
                         // Only prevent vertical scroll IF we are actually going to scroll horizontally
                         if (event.deltaY !== 0) { // Check if there's vertical scroll input
                             event.preventDefault();
                             this.scrollLeft += event.deltaY;
                         }
                     }
                 }, { passive: false });
             });
             console.log("Horizontal scroll override applied to formula containers.");

        });
    </script>

</body>
</html>